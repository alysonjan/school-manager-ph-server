import{g as K,a as _,r as n,u as pe,b as te,c as W,s as A,j as o,d as E,e as J,B as ue,f as re,h as Q,i as ae,m as me,k as G,l as X,n as ee,o as se,p as he,T as N,q as xe,t as $,I as fe,v as be,w as ge,x as ye,L as Ce}from"./index-CguHGk5K.js";import{C as we}from"./config-global-C1bjA4IF.js";import{a as ve}from"./config-BgS2nir-.js";import{T as oe}from"./TextField-BHvFdFV8.js";function Se(e){return K("PrivateSwitchBase",e)}_("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ke=e=>{const{classes:s,checked:a,disabled:c,edge:h}=e,l={root:["root",a&&"checked",c&&"disabled",h&&`edge${E(h)}`],input:["input"]};return J(l,Se,s)},Pe=A(ue)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:s})=>e==="start"&&s.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:s})=>e==="end"&&s.size!=="small",style:{marginRight:-12}}]}),je=A("input",{shouldForwardProp:re})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ie=n.forwardRef(function(s,a){const{autoFocus:c,checked:h,checkedIcon:l,defaultChecked:g,disabled:i,disableFocusRipple:k=!1,edge:u=!1,icon:C,id:x,inputProps:F,inputRef:m,name:R,onBlur:P,onChange:y,onFocus:w,readOnly:j,required:I=!1,tabIndex:f,type:t,value:d,slots:p={},slotProps:M={},...b}=s,[z,H]=pe({controlled:h,default:!!g,name:"SwitchBase",state:"checked"}),S=te(),T=r=>{w&&w(r),S&&S.onFocus&&S.onFocus(r)},B=r=>{P&&P(r),S&&S.onBlur&&S.onBlur(r)},q=r=>{if(r.nativeEvent.defaultPrevented)return;const v=r.target.checked;H(v),y&&y(r,v)};let O=i;S&&typeof O>"u"&&(O=S.disabled);const ne=t==="checkbox"||t==="radio",V={...s,checked:z,disabled:O,disableFocusRipple:k,edge:u},Y=ke(V),Z={slots:p,slotProps:{input:F,...M}},[le,ie]=W("root",{ref:a,elementType:Pe,className:Y.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Z,component:"span",...b},getSlotProps:r=>({...r,onFocus:v=>{var L;(L=r.onFocus)==null||L.call(r,v),T(v)},onBlur:v=>{var L;(L=r.onBlur)==null||L.call(r,v),B(v)}}),ownerState:V,additionalProps:{centerRipple:!0,focusRipple:!k,disabled:O,role:void 0,tabIndex:null}}),[ce,de]=W("input",{ref:m,elementType:je,className:Y.input,externalForwardedProps:Z,getSlotProps:r=>({...r,onChange:v=>{var L;(L=r.onChange)==null||L.call(r,v),q(v)}}),ownerState:V,additionalProps:{autoFocus:c,checked:h,defaultChecked:g,disabled:O,id:ne?x:void 0,name:R,readOnly:j,required:I,tabIndex:f,type:t,...t==="checkbox"&&d===void 0?{}:{value:d}}});return o.jsxs(le,{...ie,children:[o.jsx(ce,{...de}),z?l:C]})}),Fe=Q(o.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),Re=Q(o.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),ze=Q(o.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Be(e){return K("MuiCheckbox",e)}const D=_("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Le=e=>{const{classes:s,indeterminate:a,color:c,size:h}=e,l={root:["root",a&&"indeterminate",`color${E(c)}`,`size${E(h)}`]},g=J(l,Be,s);return{...s,...g}},$e=A(Ie,{shouldForwardProp:e=>re(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.root,a.indeterminate&&s.indeterminate,s[`size${E(a.size)}`],a.color!=="default"&&s[`color${E(a.color)}`]]}})(X(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ee(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(se()).map(([s])=>({props:{color:s,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[s].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ee(e.palette[s].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(se()).map(([s])=>({props:{color:s},style:{[`&.${D.checked}, &.${D.indeterminate}`]:{color:(e.vars||e).palette[s].main},[`&.${D.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Ne=o.jsx(Re,{}),Ee=o.jsx(Fe,{}),Me=o.jsx(ze,{}),Te=n.forwardRef(function(s,a){const c=ae({props:s,name:"MuiCheckbox"}),{checkedIcon:h=Ne,color:l="primary",icon:g=Ee,indeterminate:i=!1,indeterminateIcon:k=Me,inputProps:u,size:C="medium",disableRipple:x=!1,className:F,slots:m={},slotProps:R={},...P}=c,y=i?k:g,w=i?k:h,j={...c,disableRipple:x,color:l,indeterminate:i,size:C},I=Le(j),f=R.input??u,[t,d]=W("root",{ref:a,elementType:$e,className:G(I.root,F),shouldForwardComponentProp:!0,externalForwardedProps:{slots:m,slotProps:R,...P},ownerState:j,additionalProps:{type:"checkbox",icon:n.cloneElement(y,{fontSize:y.props.fontSize??C}),checkedIcon:n.cloneElement(w,{fontSize:w.props.fontSize??C}),disableRipple:x,slots:m,slotProps:{input:me(typeof f=="function"?f(j):f,{"data-indeterminate":i})}}});return o.jsx(t,{...d,classes:I})});function qe(e){return K("MuiFormControlLabel",e)}const U=_("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Oe=e=>{const{classes:s,disabled:a,labelPlacement:c,error:h,required:l}=e,g={root:["root",a&&"disabled",`labelPlacement${E(c)}`,h&&"error",l&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",h&&"error"]};return J(g,qe,s)},Ue=A("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[{[`& .${U.label}`]:s.label},s.root,s[`labelPlacement${E(a.labelPlacement)}`]]}})(X(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${U.disabled}`]:{cursor:"default"},[`& .${U.label}`]:{[`&.${U.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:s})=>s==="start"||s==="top"||s==="bottom",style:{marginLeft:16}}]}))),Ae=A("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,s)=>s.asterisk})(X(({theme:e})=>({[`&.${U.error}`]:{color:(e.vars||e).palette.error.main}}))),We=n.forwardRef(function(s,a){const c=ae({props:s,name:"MuiFormControlLabel"}),{checked:h,className:l,componentsProps:g={},control:i,disabled:k,disableTypography:u,inputRef:C,label:x,labelPlacement:F="end",name:m,onChange:R,required:P,slots:y={},slotProps:w={},value:j,...I}=c,f=te(),t=k??i.props.disabled??(f==null?void 0:f.disabled),d=P??i.props.required,p={disabled:t,required:d};["checked","name","onChange","value","inputRef"].forEach(q=>{typeof i.props[q]>"u"&&typeof c[q]<"u"&&(p[q]=c[q])});const M=he({props:c,muiFormControl:f,states:["error"]}),b={...c,disabled:t,labelPlacement:F,required:d,error:M.error},z=Oe(b),H={slots:y,slotProps:{...g,...w}},[S,T]=W("typography",{elementType:N,externalForwardedProps:H,ownerState:b});let B=x;return B!=null&&B.type!==N&&!u&&(B=o.jsx(S,{component:"span",...T,className:G(z.label,T==null?void 0:T.className),children:B})),o.jsxs(Ue,{className:G(z.root,l),ownerState:b,ref:a,...I,children:[n.cloneElement(i,p),d?o.jsxs("div",{children:[B,o.jsxs(Ae,{ownerState:b,"aria-hidden":!0,className:z.asterisk,children:["â€‰","*"]})]}):B]})});function He(){const e=xe(),[s,a]=n.useState(!1),[c,h]=n.useState(!1),[l,g]=n.useState(""),[i,k]=n.useState(""),[u,C]=n.useState({}),[x,F]=n.useState({}),[m,R]=n.useState(!1);n.useEffect(()=>{localStorage.getItem("auth_token")&&e.push("/dashboard")},[e]);const P=n.useCallback(()=>{const t={};return l.trim()||(t.username="Username is required"),i||(t.password="Password is required"),C(t),t},[l,i]),y=n.useCallback((t,d)=>{const p={...u};t==="username"&&(d.trim()?delete p.username:p.username="Username is required"),t==="password"&&(d?delete p.password:p.password="Password is required"),C(p)},[u]),w=n.useCallback(async()=>{var d,p,M;F({username:!0,password:!0});const t=P();if(!(Object.keys(t).length>0)){R(!0);try{const b=await ve.post("/login",{username:l,password:i});(d=b.data)!=null&&d.token?(localStorage.setItem("auth_token",b.data.token),b.data.user&&localStorage.setItem("user",JSON.stringify(b.data.user)),e.push("/dashboard")):C({submit:"Invalid response from server."})}catch(b){const z=((M=(p=b.response)==null?void 0:p.data)==null?void 0:M.message)||"Login failed. Please check your credentials.";C({submit:z})}finally{R(!1)}}},[l,i,e,P]),j=n.useCallback(t=>{t.key==="Enter"&&!m&&w()},[w,m]),I=n.useCallback(t=>d=>{const p=d.target.value;t==="username"&&g(p),t==="password"&&k(p),x[t]&&y(t,p)},[x,y]),f=n.useCallback(t=>()=>{F(d=>({...d,[t]:!0})),y(t,t==="username"?l:i)},[l,i,y]);return o.jsx($,{sx:{position:"fixed",inset:0,display:"flex",alignItems:"flex-start",justifyContent:"center",bgcolor:"#f4f6f8",px:{xs:1,sm:0},pt:{xs:5,sm:4},pb:{xs:1,sm:4},height:"100vh",overflow:"hidden"},children:o.jsxs($,{sx:{bgcolor:"#fff",p:{xs:3,sm:5},borderRadius:{xs:2,sm:3},boxShadow:"0 4px 16px rgba(0,0,0,0.08)",width:"100%",maxWidth:{xs:"calc(100vw - 32px)",sm:420},mx:"auto",mt:{xs:0,sm:2},maxHeight:{xs:"calc(100vh - 32px)",sm:"auto"},overflow:"hidden"},children:[o.jsxs($,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:{xs:3,sm:4}},children:[o.jsx($,{component:"img",src:"/assets/images/school-logo.png",alt:"School Logo",sx:{width:{xs:60,sm:75},mr:{xs:1,sm:1.5}}}),o.jsxs($,{sx:{lineHeight:1.2},children:[o.jsx(N,{variant:"caption",sx:{color:"text.secondary",fontWeight:500,letterSpacing:.4,fontSize:{xs:10,sm:11}},children:"TaparSoft"}),o.jsx(N,{variant:"h6",sx:{fontWeight:700,fontSize:{xs:"1.1rem",sm:"1.25rem"}},children:"SchoolMANAGER"}),o.jsx(N,{variant:"subtitle2",sx:{fontWeight:600,color:"text.secondary",fontSize:{xs:9,sm:10},textAlign:"right",letterSpacing:.3,whiteSpace:"nowrap"},children:"School Management System"})]})]}),o.jsx(N,{variant:"h5",sx:{mb:{xs:2.5,sm:3.5},fontWeight:600,textAlign:"center",fontSize:{xs:"1rem",sm:"1.1rem"}},children:"Login to your account"}),o.jsxs($,{sx:{display:"flex",flexDirection:"column",gap:{xs:2,sm:2.5}},children:[o.jsx(oe,{fullWidth:!0,label:x.username&&u.username?u.username:"Username",value:l,onChange:I("username"),onBlur:f("username"),onKeyPress:j,error:x.username&&!!u.username,disabled:m,sx:{"& .MuiOutlinedInput-root":{borderRadius:1.2}}}),o.jsx(oe,{fullWidth:!0,label:x.password&&u.password?u.password:"Password",type:s?"text":"password",value:i,onChange:I("password"),onBlur:f("password"),onKeyPress:j,error:x.password&&!!u.password,disabled:m,InputProps:{endAdornment:o.jsx(fe,{position:"end",children:o.jsx(be,{onClick:()=>a(!s),size:"small",edge:"end","aria-label":s?"Hide password":"Show password",disabled:m,children:o.jsx(ge,{icon:s?"solar:eye-bold":"solar:eye-closed-bold",width:20})})})}}),u.submit&&o.jsx(N,{color:"error",variant:"caption",sx:{display:"block",textAlign:"center",mt:-1,fontSize:{xs:"0.75rem",sm:"0.8rem"}},children:u.submit}),o.jsx($,{sx:{display:"flex",justifyContent:"flex-end"},children:o.jsx(We,{control:o.jsx(Te,{checked:c,onChange:t=>h(t.target.checked),size:"small",disabled:m}),label:o.jsx(N,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.8rem",sm:"0.875rem"}},children:"Keep me signed in"}),sx:{m:0}})}),o.jsx(ye,{fullWidth:!0,variant:"contained",size:"large",disabled:m,sx:{mt:{xs:1.2,sm:1.8},py:{xs:1.1,sm:1.4},fontWeight:600,borderRadius:1.8,textTransform:"none",boxShadow:"none"},onClick:w,children:m?"SIGNING IN...":"LOG IN"}),o.jsx($,{sx:{display:"flex",justifyContent:"center",mt:1.3},children:o.jsx(Ce,{variant:"body2",color:"text.secondary",sx:{cursor:"pointer",fontWeight:500,fontSize:{xs:"0.82rem",sm:"0.875rem"},"&:hover":{color:"primary.main"},...m&&{pointerEvents:"none",opacity:.5}},onClick:()=>!m&&e.push("/reset-password-request-lvl-1"),children:"Forgot password?"})})]})]})})}function _e(){return o.jsxs(o.Fragment,{children:[o.jsx("title",{children:`Login - ${we.appName}`}),o.jsx(He,{})]})}export{_e as default};
